(this.webpackJsonpwhatsappclone=this.webpackJsonpwhatsappclone||[]).push([[0],{37:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var s=c(4),n=c.n(s),a=c(40),i=c.n(a),r=(c(49),c(7)),o=(c(50),c(37),c(19)),l=c.n(o),d=c(22),j=c(28),u=c(26);u.a.initializeApp({apiKey:"AIzaSyAmNVCVh0sUDPC-Gq56q4jeS996TdSmjj0",authDomain:"whatsapp-clone-dcfc3.firebaseapp.com",databaseURL:"https://whatsapp-clone-dcfc3-default-rtdb.europe-west1.firebasedatabase.app",projectId:"whatsapp-clone-dcfc3",storageBucket:"whatsapp-clone-dcfc3.appspot.com",messagingSenderId:"590792210418",appId:"1:590792210418:web:7210fca42c5c904d049d6b",measurementId:"G-EYGEME7K2S"});var m=u.a.firestore(),b=u.a.auth(),O=c(2);function f(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useState)(null),n=Object(r.a)(c,2),a=n[0],i=n[1];function o(){return(o=Object(d.a)(l.a.mark((function c(){var s,n;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s=e.current.value,n=t.current.value,c.prev=2,c.next=5,b.signInWithEmailAndPassword(s,n);case 5:c.next=11;break;case 7:c.prev=7,c.t0=c.catch(2),console.log(c.t0),i(c.t0.message);case 11:case"end":return c.stop()}}),c,null,[[2,7]])})))).apply(this,arguments)}return Object(O.jsxs)("div",{style:{background:"#ddd",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)("div",{style:{background:"teal",width:"100vw",height:"8em"}}),Object(O.jsxs)("div",{style:{background:"#eee",width:"30em",borderRadius:10,boxShadow:"2px 2px 5px grey",marginTop:"-3em",overflow:"hidden"},children:[Object(O.jsxs)("div",{style:{background:"#1ebea6"},children:[Object(O.jsx)("img",{style:{width:"100%"},src:"https://th.bing.com/th/id/Rc1610aaa87c61a8102270333758e7d8c?rik=GiHz7sNbhAPT1Q&riu=http%3a%2f%2fonlinestory.in%2fwp-content%2fuploads%2f2019%2f07%2fwhatsapp-logo.jpg&ehk=RQB7ex32h0dGXKqbgEqVniJcsAVQPvEtWFj7gmqb5Qo%3d&risl=&pid=ImgRaw",alt:"."}),Object(O.jsx)("h4",{style:{fontWeight:"normal",textAlign:"center",marginTop:"-1.5em",color:"#fff"},children:"Login to your account"})]}),Object(O.jsxs)("div",{className:"my-4 mx-5",children:[a&&Object(O.jsx)("div",{className:"alert alert-danger",children:a}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:e,type:"email",className:"form-control",placeholder:"Enter email address"})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:t,type:"password",className:"form-control",placeholder:"Enter password"})}),Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("button",{className:"btn btn-success",onClick:function(){return o.apply(this,arguments)},children:"Login"})}),Object(O.jsx)("div",{className:"my-2",children:Object(O.jsx)(j.b,{to:"/signup",children:Object(O.jsx)("small",{children:"create new account"})})})]})]})]})}function h(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useRef)(),n=Object(s.useRef)(),a=Object(s.useState)(null),i=Object(r.a)(a,2),o=i[0],j=i[1];function u(){return(u=Object(d.a)(l.a.mark((function s(){var a,i,r,o;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(""!==(a=e.current.value).trim()){s.next=5;break}j("Name is a required field"),s.next=23;break;case 5:if(i=t.current.value,r=c.current.value,o=n.current.value,r!==o){s.next=22;break}return s.prev=9,s.next=12,b.createUserWithEmailAndPassword(i,r).then((function(e){var t=e.user;console.log(t.uid),m.collection("users").doc(t.uid).set({name:a,email:i,Groups:[],img:"",bio:""}).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)}))}));case 12:return s.next=14,b.currentUser.updateProfile({displayName:a});case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(9),console.log(s.t0),j(s.t0.message);case 20:s.next=23;break;case 22:j("passwords didn't match");case 23:case"end":return s.stop()}}),s,null,[[9,16]])})))).apply(this,arguments)}return Object(O.jsxs)("div",{style:{background:"#ddd",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)("div",{style:{background:"teal",width:"100vw",height:"8em"}}),Object(O.jsxs)("div",{style:{background:"#eee",width:"50em",height:"30em",borderRadius:10,boxShadow:"2px 2px 5px grey",marginTop:"-3em",overflow:"hidden",display:"flex"},children:[Object(O.jsxs)("div",{style:{background:"#1ebea6",width:"50%"},children:[Object(O.jsx)("img",{style:{width:"100%"},src:"https://th.bing.com/th/id/Rc1610aaa87c61a8102270333758e7d8c?rik=GiHz7sNbhAPT1Q&riu=http%3a%2f%2fonlinestory.in%2fwp-content%2fuploads%2f2019%2f07%2fwhatsapp-logo.jpg&ehk=RQB7ex32h0dGXKqbgEqVniJcsAVQPvEtWFj7gmqb5Qo%3d&risl=&pid=ImgRaw",alt:"."}),Object(O.jsx)("h4",{style:{fontWeight:"normal",textAlign:"center",marginTop:"-1.5em",color:"#fff"},children:"Create new account"})]}),Object(O.jsxs)("div",{className:"my-5 mx-5",style:{width:"50%"},children:[o&&Object(O.jsx)("div",{className:"alert alert-danger",children:o}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:e,className:"form-control",placeholder:"Enter your name"})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:t,type:"email",className:"form-control",placeholder:"Enter email address"})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:c,type:"password",className:"form-control",placeholder:"Enter password"})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{ref:n,type:"password",className:"form-control",placeholder:"Confirm password"})}),Object(O.jsx)("div",{className:"d-flex justify-content-center",children:Object(O.jsx)("button",{className:"btn btn-success text-center",onClick:function(){return u.apply(this,arguments)},children:"Signup"})})]})]})]})}var p=c(8),x=c(35),g=c(36),v=c(42),N=c(43),y=c(15),w=c(24);function k(e){var t=e.setinfoOpen,c=e.width,n=e.group,a=e.setGroup,i=b.currentUser.uid,o=Object(s.useState)([]),l=Object(r.a)(o,2),d=l[0],j=l[1],u=Object(s.useState)([]),f=Object(r.a)(u,2),h=f[0],x=f[1];return Object(s.useEffect)((function(){m.collection("groups/"+n.id+"/messages").orderBy("time").onSnapshot((function(e){console.log(n.id),j(e.docs.map((function(e){return Object(p.a)({id:e.id},e.data())})))}))}),[n]),Object(s.useEffect)((function(){var e=n.users.map((function(e){return m.collection("users").doc(e).get()}));Promise.all(e).then((function(e){x(e.map((function(e){return console.log(e.data()),{id:e.id,name:e.data().name}})))}))}),[n]),Object(O.jsxs)("div",{className:"chat",style:{width:c},children:[Object(O.jsx)(C,{name:n.name,usernames:h,img:n.img,setinfoOpen:t,group:n,setGroup:a}),Object(O.jsx)(S,{messages:d,userID:i,setMessages:j,usernames:h,groupID:n.id}),Object(O.jsx)(E,{sendMessage:function(e){m.collection("groups/"+n.id+"/messages").add(e).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)}))},userID:i})]})}function C(e){var t=e.name,c=e.usernames,n=e.img,a=e.setinfoOpen,i=e.group,o=(e.setGroup,Object(s.useState)(!1)),l=Object(r.a)(o,2),d=l[0],j=l[1],b=Object(s.useState)(!1),f=Object(r.a)(b,2),h=f[0],p=f[1],x=Object(s.useState)(),N=Object(r.a)(x,2),y=N[0],w=N[1],k=Object(s.useRef)(null);function C(){for(var e=[],t=0;t<c.length-1;t++)e.push(Object.values(c[t])[1]),e.push(", ");return e.push(Object.values(c[t])[1]),Object(O.jsx)(O.Fragment,{children:e})}function S(e){e.preventDefault(),p(!1),m.collection("users").where("email","==",y).get().then((function(e){e.forEach((function(e){var t;t=e.id,m.collection("groups").doc(i.id).update({users:u.a.firestore.FieldValue.arrayUnion(t)}),console.log(i.id),m.collection("users").doc(t).update({Groups:u.a.firestore.FieldValue.arrayUnion(i.id)})}))}))}function E(){return Object(O.jsx)("div",{className:"modalBack",children:Object(O.jsx)("div",{className:"addmodal",children:Object(O.jsxs)("form",{autoComplete:"off",onSubmit:function(e){return S(e)},children:[Object(O.jsx)("div",{className:"modalTitle",children:"Enter Contact's email"}),Object(O.jsx)("div",{className:"modalForm",children:Object(O.jsx)("input",{type:"email",autoFocus:"autoFocus",name:"addemail",className:"addemail",value:y,onChange:function(e){return w(e.target.value)}})}),Object(O.jsxs)("div",{className:"modalbuttons",children:[Object(O.jsx)("div",{className:"cancelbutton",onClick:function(){p(!1),w("")},children:"CANCEL"}),Object(O.jsx)("div",{className:"deletebutton",onClick:function(e){p(!1),S(e)},children:"ADD"})]})]})})})}function F(){return Object(O.jsxs)("div",{ref:k,className:"ddMenu",children:[Object(O.jsx)("span",{className:"ddItem",onClick:function(){a(!0),j(!d)},children:"Contact info"}),Object(O.jsx)("span",{className:"ddItem",children:"Select Messages"}),Object(O.jsx)("span",{className:"ddItem",onClick:function(){p(!0),j(!1)},children:"Add Participant"}),Object(O.jsx)("span",{className:"ddItem",children:"Delete Chat"})]})}return function(e,t,c){Object(s.useEffect)((function(){function s(s){e.current&&!e.current.contains(s.target)&&t(!c)}return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}}),[e,c])}(k,j,d),Object(O.jsxs)("div",{className:"topBar",children:[Object(O.jsx)("div",{onClick:function(){return a(!0)},children:""!==n?Object(O.jsx)("img",{className:"dp",src:n,alt:"dp",style:{objectFit:"cover"}}):Object(O.jsx)("img",{className:"dp",src:"https://lh3.googleusercontent.com/ABlX4ekWIQimPjZ1HlsMLYXibPo2xiWnZ2iny1clXQm2IQTcU2RG0-4S1srWsBQmGAo=s300",alt:"dp",style:{objectFit:"cover"}})}),Object(O.jsxs)("div",{className:"details",onClick:function(){a(!0)},children:[Object(O.jsx)("section",{className:"gName",children:Object(O.jsx)("span",{children:t})}),Object(O.jsx)("section",{className:"gMembers",children:0!==c.length?Object(O.jsx)(C,{}):""})]}),Object(O.jsxs)("div",{className:"icons",children:[Object(O.jsx)(g.b,{onClick:function(){return alert("Search Clicked")}}),Object(O.jsx)(v.a,{role:"button",onClick:function(){return j(!d)}})]}),d&&Object(O.jsx)(F,{}),h&&Object(O.jsx)(E,{})]})}function S(e){var t=e.messages,c=e.userID,n=e.setMessages,a=e.usernames,i=e.groupID,o="#029d00";Object(s.useEffect)((function(){t.sort((function(e,t){return new Date(1e3*t.time.seconds)-new Date(1e3*e.time.seconds)}))}),[]);var l=Object(s.useState)(!1),d=Object(r.a)(l,2),j=d[0],u=d[1],b=Object(s.useState)(!1),f=Object(r.a)(b,2),h=f[0],p=f[1],g=Object(s.useState)(""),v=Object(r.a)(g,2),N=v[0],k=v[1],C=Object(s.useState)(""),S=Object(r.a)(C,2),E=S[0],F=S[1],I=Object(s.useRef)(null);function D(e){var c=e.type;return Object(O.jsx)("div",{className:"modalBack",children:Object(O.jsxs)("div",{className:"ownmodal",children:[Object(O.jsxs)("div",{className:"modalTitle",children:["Delete ",c,"?"]}),Object(O.jsxs)("div",{className:"modalbuttons",children:[Object(O.jsx)("div",{className:"cancelbutton",onClick:function(){u(!1)},children:"CANCEL"}),Object(O.jsx)("div",{className:"deletebutton",onClick:function(){u(!1),n(t.filter((function(e){return e.id!==N}))),console.log(N),m.collection("groups/"+i+"/messages").doc(N).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"DELETE"})]})]})})}function R(){return Object(O.jsxs)("div",{className:"imgmodal",children:[Object(O.jsx)("span",{className:"closebutton",children:Object(O.jsx)(w.a,{onClick:function(){p(!h)}})}),Object(O.jsx)("img",{src:E,alt:"selectedimg"})]})}function G(e){var t=e.message,c=new Date(t.time).toTimeString().split(" ")[0].split(":"),s=Object(r.a)(c,2),n=s[0]+":"+s[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"sent",children:[Object(O.jsx)("span",{className:"msg",children:t.message}),Object(O.jsx)("button",{className:"dd",children:Object(O.jsx)(y.c,{className:"ddIcon",onClick:function(){k(t.id),u(!0)}})}),Object(O.jsx)("span",{className:"time",children:n})]}),j&&Object(O.jsx)(D,{type:"Message"})]})}function A(e){var t,c=e.message,s=new Date(c.time).toTimeString().split(" ")[0].split(":"),n=Object(r.a)(s,2),i=n[0]+":"+n[1],l="",d=Object(x.a)(a);try{for(d.s();!(t=d.n()).done;){var u=t.value;u.id===c.sender&&(l=u.name)}}catch(m){d.e(m)}finally{d.f()}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"received",children:[Object(O.jsx)("span",{className:"name",style:{color:o},children:l}),Object(O.jsx)("span",{className:"msg",children:c.message}),Object(O.jsx)("span",{className:"time",children:i})]}),j&&Object(O.jsx)(D,{})]})}Object(s.useEffect)((function(){I.current.scrollIntoView()}),[t]);var T=function(e){var t=e.message,c=new Date(t.time).toTimeString().split(" ")[0].split(":"),s=Object(r.a)(c,2),n=s[0]+":"+s[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"imgsent",children:[Object(O.jsx)("button",{className:"dd",children:Object(O.jsx)(y.c,{className:"ddIcon",onClick:function(){k(t.id),u(!0)}})}),Object(O.jsx)("span",{className:"img",children:Object(O.jsx)("img",{src:t.imglink,style:{objectFit:"cover"},onClick:function(){p(!0),F(t.imglink)},alt:"img"})}),Object(O.jsx)("span",{className:"time",children:n})]}),j&&Object(O.jsx)(D,{type:"Image"}),h&&Object(O.jsx)(R,{})]})},U=function(e){var t,c=e.message,s=new Date(c.time).toTimeString().split(" ")[0].split(":"),n=Object(r.a)(s,2),i=n[0]+":"+n[1],l="",d=Object(x.a)(a);try{for(d.s();!(t=d.n()).done;){var u=t.value;u.id===c.sender&&(l=u.name)}}catch(m){d.e(m)}finally{d.f()}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"imgreceived",children:[Object(O.jsx)("span",{className:"name",style:{color:o},children:l}),Object(O.jsx)("span",{className:"img",children:Object(O.jsx)("img",{src:c.imglink,alt:"messageimg",onClick:function(){p(!0),F(c.imglink)}})}),Object(O.jsx)("span",{className:"time",children:i})]}),j&&Object(O.jsx)(D,{}),h&&Object(O.jsx)(R,{})]})};return Object(O.jsx)("div",{className:"messageSection",children:Object(O.jsxs)("div",{className:"message",children:[t.map((function(e){return e.type?e.sender===c?Object(O.jsx)(T,{message:e}):Object(O.jsx)(U,{message:e}):""!==e.message?e.sender===c?Object(O.jsx)(G,{message:e}):Object(O.jsx)(A,{message:e}):null})),Object(O.jsx)("div",{ref:I,style:{padding:10}})]})})}function E(e){var t=e.sendMessage,c=e.userID,n=Object(s.useState)({sender:"",message:"",time:null}),a=Object(r.a)(n,2),i=a[0],o=a[1];var l=Object(s.useRef)(null);return Object(O.jsxs)("div",{className:"sendBar",children:[Object(O.jsxs)("div",{className:"botIcons",children:[Object(O.jsx)(N.a,{className:"boticon"}),Object(O.jsx)(g.a,{className:"boticon",onClick:function(){l.current.click()}}),Object(O.jsx)("input",{type:"file",ref:l,onChange:function(e){var s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onload=function(e){t(Object(p.a)(Object(p.a)({},i),{},{type:"img",imglink:s.result,sender:c,time:Date.now()}))}},style:{display:"none"}})]}),Object(O.jsx)("div",{className:"form",children:Object(O.jsx)("form",{onSubmit:function(e){!function(e){t(Object(p.a)(Object(p.a)({},i),{},{message:i.message,sender:c,time:Date.now()})),o({sender:"",message:"",time:null}),e.preventDefault()}(e)},autoComplete:"off",children:Object(O.jsx)("input",{type:"text",name:"message",className:"messageField",value:i.message,placeholder:"Type a message",onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{message:e.target.value}))}})})}),Object(O.jsx)("div",{className:"micIcon",children:Object(O.jsx)(y.e,{})})]})}var F=c(44);function I(e){var t=e.setGroup,c=e.list,s=e.selectedGrpId;return Object(O.jsx)("div",{className:"list",children:0===c.length?Object(O.jsx)("p",{className:"text-center mt-3 text-secondary",children:"No groups"}):c.map((function(e,c){return Object(O.jsxs)("div",{className:"list-item "+(e.id===s?"active-item":""),onClick:function(){t(e)},children:[Object(O.jsx)("img",{className:"avatar big",src:e.img?e.img:"https://lh3.googleusercontent.com/ABlX4ekWIQimPjZ1HlsMLYXibPo2xiWnZ2iny1clXQm2IQTcU2RG0-4S1srWsBQmGAo=s300",style:{objectFit:"cover"},alt:"."}),Object(O.jsxs)("div",{className:"ml-1",children:[Object(O.jsx)("p",{className:"title",children:e.name}),Object(O.jsx)("p",{className:"subtitle",children:"This is the last message."})]})]},c)}))})}var D=c(25);function R(e){var t=e.show,c=e.close,n=e.user,a=e.setUser,i=Object(s.useState)(!1),o=Object(r.a)(i,2),l=o[0],d=o[1],j=Object(s.useState)(!1),u=Object(r.a)(j,2),b=u[0],f=u[1],h=Object(s.useState)(!1),x=Object(r.a)(h,2),g=x[0],v=x[1],N=Object(s.useRef)(null),w=Object(s.useState)(n.name),k=Object(r.a)(w,2),C=k[0],S=k[1],E=Object(s.useRef)(null),F=Object(s.useRef)(null),I=function(){N.current.click(),d(!1)};function R(){return Object(O.jsx)("div",{ref:E,className:"dpdd",children:Object(O.jsx)("span",{className:"dpddItem",onClick:I,children:"Upload Photo"})})}function G(e){console.log(e),m.collection("users").doc(e.id).update({name:e.name,bio:e.bio,img:e.img})}function A(e,t){e.preventDefault(),"name"===t?""===C?(S(n.name),f(!1)):(a(Object(p.a)(Object(p.a)({},n),{},{name:C})),G(Object(p.a)(Object(p.a)({},n),{},{name:C})),f(!1)):(v(!1),G(n))}function T(e){e.value;var t=e.changefield;return"name"===t?Object(O.jsx)("div",{className:"editform",children:Object(O.jsx)("form",{ref:F,autoComplete:"off",onSubmit:function(e){return A(e,t)},children:Object(O.jsx)("input",{type:"text",maxLength:"15",autoFocus:"autoFocus",spellCheck:"false",name:"editname",className:"editgname",value:C,onChange:function(e){return S(e.target.value)}})})}):"bio"===t?Object(O.jsx)("div",{className:"editform",children:Object(O.jsx)("form",{autoComplete:"off",onSubmit:function(e){return A(e,t)},children:Object(O.jsx)("input",{type:"text",autoFocus:"autoFocus",spellCheck:"false",name:"editbio",className:"editgdesc",value:n.bio,onChange:function(e){return a(Object(p.a)(Object(p.a)({},n),{},{bio:e.target.value}))}})})}):void 0}return Object(O.jsx)(O.Fragment,{children:n&&Object(O.jsxs)("div",{className:"account ".concat(t?"shown":""),children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("p",{className:"fs-large ml-1 my-0",children:"Account"}),Object(O.jsx)(y.b,{className:"close-icon mr-1",onClick:c})]}),Object(O.jsxs)("div",{className:"infodp",children:[""!==n.img?Object(O.jsx)("img",{src:n.img,alt:"dp",className:"account-img",style:{objectFit:"cover"}}):Object(O.jsx)("img",{src:"https://picsum.photos/1000/1000",alt:"dp",className:"account-img",style:{objectFit:"cover"}}),Object(O.jsxs)("div",{className:"dphover",onClick:function(){return d(!0)},children:[Object(O.jsx)("div",{children:Object(O.jsx)(D.a,{className:"camicon"})}),Object(O.jsx)("div",{className:"changedp",children:"CHANGE DP"})]})]}),Object(O.jsx)("input",{type:"file",ref:N,onChange:function(e){!function(e){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(e){a((function(e){var c=Object(p.a)(Object(p.a)({},e),{},{img:t.result});return G(c),c}))}}(e)},style:{display:"none"}}),l&&Object(O.jsx)(R,{}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("span",{children:"Your Name"}),Object(O.jsxs)("div",{className:"info-content",children:[Object(O.jsx)("p",{className:"m-0",children:b?Object(O.jsx)(T,{changefield:"name",value:n.name}):n.name}),Object(O.jsx)("span",{className:"editicon",onClick:function(){f(!b)},children:b?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(y.d,{className:"icon"})})]})]}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("span",{children:"Your Bio"}),Object(O.jsxs)("div",{className:"info-content",children:[Object(O.jsx)("p",{className:"m-0",children:g?Object(O.jsx)(T,{changefield:"bio",value:n.bio}):""===n.bio?"Write something about yourself.":Object(O.jsx)("div",{className:"agdesc",children:n.bio})}),Object(O.jsx)("span",{className:"editicon",onClick:function(){v(!g)},children:g?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(y.d,{className:"icon"})})]})]}),Object(O.jsxs)("div",{className:"info-box",children:[Object(O.jsx)("span",{children:"Your Email"}),Object(O.jsx)("div",{className:"info-content",children:Object(O.jsx)("p",{className:"m-0",children:n.email})})]})]})]})})}function G(e){var t=e.setGroup,c=e.list,n=e.selectedGrpId,a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=i[0],j=i[1],f=Object(s.useState)(!1),h=Object(r.a)(f,2),x=h[0],g=h[1],v=Object(s.useState)(),N=Object(r.a)(v,2),w=N[0],k=N[1],C=Object(s.useState)(),S=Object(r.a)(C,2),E=S[0],D=S[1],G=Object(s.useRef)(null),A=Object(s.useState)(!1),T=Object(r.a)(A,2),U=T[0],L=T[1];function P(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.signOut();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return Object(O.jsxs)("div",{ref:G,className:"moredd",children:[Object(O.jsx)("span",{className:"moreddItem",onClick:function(){L(!U),g(!0)},children:"Create Group"}),Object(O.jsx)("span",{className:"moreddItem",onClick:P,children:"Logout"})]})}function W(e){e.preventDefault(),g(!1),m.collection("groups").add({name:w,createdAt:Date.now(),desc:"",img:"https://wallpapercave.com/wp/wp2610904.jpg",users:[b.currentUser.uid]}).then((function(e){m.collection("users").doc(b.currentUser.uid).update({Groups:u.a.firestore.FieldValue.arrayUnion(e.id)}),m.collection("groups").doc(e.id).collection("messages").add({}).then((function(t){m.collection("groups").doc(e.id).collection("messages").doc(t.id).delete()}))})).catch((function(e){console.error("Error adding document: ",e)}))}function M(){return Object(O.jsx)("div",{className:"modalBack",children:Object(O.jsx)("div",{className:"newgrpmodal",children:Object(O.jsxs)("form",{autoComplete:"off",onSubmit:function(e){return W(e)},children:[Object(O.jsx)("div",{className:"modalTitle",children:"Enter Group Name: "}),Object(O.jsx)("div",{className:"modalForm",children:Object(O.jsx)("input",{type:"text",autoFocus:"autoFocus",name:"addemail",className:"addemail",value:w,onChange:function(e){return k(e.target.value)}})}),Object(O.jsxs)("div",{className:"modalbuttons",children:[Object(O.jsx)("div",{className:"cancelbutton",onClick:function(){g(!1),k("")},children:"CANCEL"}),Object(O.jsx)("div",{className:"deletebutton",onClick:function(e){g(!1),W(e)},children:"CREATE"})]})]})})})}return Object(s.useEffect)((function(){m.collection("users").doc(b.currentUser.uid).get().then((function(e){D(Object(p.a)({id:e.id},e.data()))}))}),[]),function(e,t,c){Object(s.useEffect)((function(){function s(s){e.current&&!e.current.contains(s.target)&&t(!c)}return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}}),[e,c])}(G,L,U),Object(O.jsxs)("div",{className:"left",children:[E&&Object(O.jsx)(R,{show:o,close:function(){return j(!1)},user:E,setUser:D}),U&&Object(O.jsx)(B,{}),x&&Object(O.jsx)(M,{}),Object(O.jsxs)("div",{className:"header",children:[Object(O.jsxs)("div",{className:"top",children:[E&&""!==E.img?Object(O.jsx)("img",{src:E.img,alt:"dp",className:"avatar",style:{objectFit:"cover"},onClick:function(){j(!0)}}):Object(O.jsx)("img",{src:"https://picsum.photos/1000/1000",alt:"dp",className:"avatar",style:{objectFit:"cover"},onClick:function(){j(!0)}}),Object(O.jsxs)("div",{className:"options",children:[Object(O.jsx)(F.a,{className:"icon"}),Object(O.jsx)(y.a,{className:"icon"}),Object(O.jsx)(y.f,{style:{cursor:"Pointer"},className:"icon",onClick:function(){L(!0)}})]})]}),Object(O.jsx)("div",{className:"search",children:Object(O.jsxs)("div",{className:"input-box",children:[Object(O.jsx)(y.g,{className:"search-icon"}),Object(O.jsx)("input",{className:"input",placeholder:"Search or start new chat"})]})})]}),Object(O.jsx)(I,{setGroup:t,list:c,selectedGrpId:n})]})}function A(e){var t,c=e.setinfoOpen,n=e.group,a=e.setGroup,i=b.currentUser.uid,o=Object(s.useState)(!1),l=Object(r.a)(o,2),d=l[0],j=l[1],f=Object(s.useState)(!1),h=Object(r.a)(f,2),x=h[0],g=h[1],v=Object(s.useState)(!1),N=Object(r.a)(v,2),k=N[0],C=N[1],S=Object(s.useState)(!1),E=Object(r.a)(S,2),F=E[0],I=E[1],R=Object(s.useRef)(null),G=Object(s.useRef)(null),A=Object(s.useState)(),T=Object(r.a)(A,2),U=T[0],L=T[1];Object(s.useEffect)((function(){W(n),a(n),L(n.name)}),[n]),t=R,Object(s.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&j(!d)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,d]);var P=Object(s.useRef)(null),Q=function(){P.current.click(),j(!1)};function B(){return Object(O.jsx)("div",{ref:R,className:"dpdd",children:Object(O.jsx)("span",{className:"dpddItem",onClick:Q,children:"Upload Photo"})})}function W(e){m.collection("groups").doc(e.id).set(e).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))}function M(e,t){e.preventDefault(),"name"===t?""===U?(L(n.name),g(!1)):(a(Object(p.a)(Object(p.a)({},n),{},{name:U})),W(Object(p.a)(Object(p.a)({},n),{},{name:U})),g(!1)):(C(!1),W(n))}function V(e){var t=e.value,c=e.changefield;return"name"===c?Object(O.jsx)("div",{className:"editform",children:Object(O.jsx)("form",{ref:G,autoComplete:"off",onSubmit:function(e){return M(e,c)},children:Object(O.jsx)("input",{type:"text",maxLength:"15",autoFocus:"autoFocus",spellCheck:"false",name:"editgname",className:"editgname",value:U,onChange:function(e){return L(e.target.value)}})})}):"desc"===c?Object(O.jsx)("div",{className:"editform",children:Object(O.jsx)("form",{autoComplete:"off",onSubmit:function(e){return M(e,c)},children:Object(O.jsx)("input",{type:"text",autoFocus:"autoFocus",spellCheck:"false",name:"editgdesc",className:"editgdesc",value:t,onChange:function(e){return a(Object(p.a)(Object(p.a)({},n),{},{desc:e.target.value}))}})})}):void 0}function X(){return Object(O.jsx)("div",{className:"modalBack",children:Object(O.jsxs)("div",{className:"ownmodal",children:[Object(O.jsx)("div",{className:"modalTitle",children:"Exit Group?"}),Object(O.jsxs)("div",{className:"modalbuttons",children:[Object(O.jsx)("div",{className:"cancelbutton",onClick:function(){I(!1)},children:"CANCEL"}),Object(O.jsx)("div",{className:"deletebutton",onClick:function(){I(!1),m.collection("groups").doc(n.id).update({users:u.a.firestore.FieldValue.arrayRemove(i)}),m.collection("users").doc(i).update({Groups:u.a.firestore.FieldValue.arrayRemove(n.id)}),a()},children:"EXIT"})]})]})})}function q(e){var t=e.cgroup,c=new Date(t.createdAt),s=c.toTimeString().split(" ")[0].split(":"),n=Object(r.a)(s,2),a=n[0]+":"+n[1];console.log(t.createdAt);var i=c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear();return console.log(i),Object(O.jsxs)(O.Fragment,{children:["Created on ",i," at ",a]})}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{className:"infoTop",children:[Object(O.jsx)("span",{className:"closeIcon",children:Object(O.jsx)(w.a,{onClick:function(){return c(!1)}})}),Object(O.jsx)("span",{className:"grpinfo",children:"Group Info"})]}),Object(O.jsxs)("div",{className:"infoRest",children:[Object(O.jsxs)("div",{className:"infodetails",children:[Object(O.jsxs)("div",{className:"infodp",children:[""!==n.img?Object(O.jsx)("img",{src:n.img,alt:"dp",style:{objectFit:"cover"}}):Object(O.jsx)("img",{src:"https://lh3.googleusercontent.com/ABlX4ekWIQimPjZ1HlsMLYXibPo2xiWnZ2iny1clXQm2IQTcU2RG0-4S1srWsBQmGAo=s300",alt:"dp",style:{objectFit:"cover"}}),Object(O.jsxs)("div",{className:"dphover",onClick:function(){return j(!0)},children:[Object(O.jsx)("div",{children:Object(O.jsx)(D.a,{className:"camicon"})}),Object(O.jsx)("div",{className:"changedp",children:"CHANGE GROUP"}),Object(O.jsx)("div",{className:"changedp",children:"ICON"})]})]}),Object(O.jsx)("input",{type:"file",ref:P,onChange:function(e){!function(e){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(e){a(Object(p.a)(Object(p.a)({},n),{},{img:t.result}))}}(e)},style:{display:"none"}}),d&&Object(O.jsx)(B,{}),Object(O.jsxs)("div",{className:"infomain",children:[Object(O.jsxs)("div",{className:"infogname",children:[Object(O.jsx)("span",{className:"infoname",children:x?Object(O.jsx)(V,{changefield:"name",value:n.name}):n.name}),Object(O.jsx)("span",{className:"infodate",children:n&&Object(O.jsx)(q,{cgroup:n})})]}),Object(O.jsx)("span",{className:"editicon",onClick:function(){g(!x)},children:x?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(y.d,{})})]})]}),Object(O.jsxs)("div",{className:"infoDesc",children:[Object(O.jsxs)("div",{className:"infoadesc",children:[Object(O.jsx)("span",{className:"desc",children:"Description"}),Object(O.jsx)("span",{className:"gdesc",children:k?Object(O.jsx)(V,{changefield:"desc",value:n.desc}):""===n.desc?"Add group description":Object(O.jsx)("div",{className:"agdesc",children:n.desc})})]}),Object(O.jsx)("span",{className:"editicon",onClick:function(){C(!k)},children:k?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(y.d,{})})]}),Object(O.jsxs)("div",{className:"infoFooter",children:[Object(O.jsxs)("div",{className:"exitbutton",children:[Object(O.jsx)("span",{className:"exiticon",children:Object(O.jsx)(D.b,{})}),Object(O.jsx)("span",{className:"exit",onClick:function(){I(!0)},children:"Exit group"})]}),Object(O.jsxs)("div",{className:"reportbutton",children:[Object(O.jsx)("span",{className:"reporticon",children:Object(O.jsx)(w.b,{})}),Object(O.jsx)("span",{className:"report",children:" Report group"})]})]})]})]}),F&&Object(O.jsx)(X,{})]})}var T=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(),i=Object(r.a)(a,2),o=i[0],l=i[1],d=Object(s.useState)([]),j=Object(r.a)(d,2),u=j[0],f=j[1];return Object(s.useEffect)((function(){m.collection("users").doc(b.currentUser.uid).onSnapshot((function(e){if(null!=e.data()){var t=e.data().Groups;console.log(t);var c=t.map((function(e){return m.collection("groups").doc(e).get()}))}Promise.all(c).then((function(e){f(e.map((function(e){return Object(p.a)({id:e.id},e.data())})))}))}))}),[o]),Object(O.jsxs)("div",{className:"page",children:[Object(O.jsx)("div",{className:"top2"}),Object(O.jsx)("div",{className:"rest"}),Object(O.jsxs)("div",{className:"owncontainer",children:[Object(O.jsx)(G,{setGroup:l,list:u,selectedGrpId:null===o||void 0===o?void 0:o.id}),o&&Object(O.jsx)(k,{setinfoOpen:n,width:c?"40%":"70%",group:o,setGroup:l}),o&&c&&Object(O.jsx)(A,{setinfoOpen:n,group:o,setGroup:l})]})]})},U=c(12);var L=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=i[0],l=i[1];return Object(s.useEffect)((function(){return l(!0),b.onAuthStateChanged((function(e){l(!1),n(null!==e)}))}),[]),Object(O.jsx)(j.a,{children:Object(O.jsxs)(U.d,{children:[c&&Object(O.jsx)(U.b,{exact:!0,path:"/",component:T}),!c&&Object(O.jsx)(U.b,{exact:!0,path:"/login",component:f}),!c&&Object(O.jsx)(U.b,{exact:!0,path:"/signup",component:h}),!c&&Object(O.jsx)(U.b,{exact:!0,path:"/loading",component:function(){return Object(O.jsx)("p",{children:"loading..."})}}),Object(O.jsx)(U.a,{exact:!0,to:o?"/loading":c?"/":"login"})]})})};c(62);i.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(L,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.850fa61c.chunk.js.map